### 迁移服务 (Transfer)

迁移服务定义了七牛云存储数据迁移服务相关的 API！迁移服务定义了以下组件及其工作模式:

#### 调度器 (scheduler)

- 调度器 (scheduler) 在启动时通过 [注册调度器](scheduler_put.md) 接口注册自己

    - 注册任务回调接口，用以下发任务定义 (job spec)

    - 注册状态回调接口，用以获取当前任务执行状态和对应任务处理器 (job workers) 状态等信息

    - 注册管理回调接口，用以暂停/恢复/删除当前迁移项目

- [创建迁移](transfer_put.md) 成功后，迁移服务按照类型下发任务定义 (job spec) 给相应的调度器 (scheduler)

- 调度器申请任务队列 (job queue)，并分配任务处理器 (job workers)

- 调度器根据任务定义 (job spec) 生产任务队列 (job queue) 并提交到 NSQ 服务

- 调度器在所有任务处理完成后注销已分配的任务处理器 (job workers)

#### 处理器 (Worker)

- 处理器 (worker) 由调度器 (scheduler) 动态分配

- 处理器 (worker) 在启动时向调度器注册自己

    - 注册管理回调接口，用以暂停/恢复/删除当前任务

- 处理器 (worker) 在处理任务时向调度器 (scheduler) 上报当前任务处理的信息

    - 在任务处理开始时

    - 在任务处理过程中 (按照配置每隔指定时间)

    - 在任务处理结束或错误时
